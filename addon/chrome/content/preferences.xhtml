<linkset>
  <html:link rel="localization" href="__addonRef__-preferences.ftl" />
</linkset>
<vbox
  id="zotero-prefpane-__addonRef__"
  onload="Zotero.__addonInstance__.hooks.onPrefsEvent('load', {window}); initModelVisibility();"
>
  <script>
    function initModelVisibility() {
      const modelType = document.getElementById('zotero-prefpane-__addonRef__-MODEL_TYPE').value;
      updateModelVisibility(modelType);
    }

    function updateModelVisibility(modelType) {
      const openaiSettings = document.getElementById('openai-settings');
      const ollamaSettings = document.getElementById('ollama-settings');
      
      openaiSettings.style.display = modelType === 'openai' ? 'block' : 'none';
      ollamaSettings.style.display = modelType === 'ollama' ? 'block' : 'none';
    }
  </script>

  <groupbox>
    <label><html:h2 data-l10n-id="aria-pref-model-configuration"></html:h2></label>
    <hbox>
      <label data-l10n-id="aria-pref-model-type"></label>
      <radiogroup
        id="zotero-prefpane-__addonRef__-MODEL_TYPE"
        preference="extensions.zotero.__addonRef__.MODEL_TYPE"
        native="true"
        oncommand="updateModelVisibility(this.value)"
      >
        <radio
          label="OpenAI"
          value="openai"
          id="zotero-prefpane-__addonRef__-MODEL_TYPE-0"
        />
        <radio
          label="Ollama"
          value="ollama"
          id="zotero-prefpane-__addonRef__-MODEL_TYPE-1"
        />
      </radiogroup>
    </hbox>

    <groupbox id="openai-settings">
      <hbox>
        <label data-l10n-id="aria-pref-openai-model"></label>
        <radiogroup
          id="zotero-prefpane-__addonRef__-OPENAI_MODEL"
          preference="extensions.zotero.__addonRef__.OPENAI_MODEL"
          native="true"
        >
          <radio
            label="GPT-4"
            value="gpt-4"
            id="zotero-prefpane-__addonRef__-OPENAI_MODEL-0"
          />
          <radio
            label="GPT-4 Turbo"
            value="gpt-4-turbo"
            id="zotero-prefpane-__addonRef__-OPENAI_MODEL-1"
          />
          <radio
            label="GPT-3.5 Turbo"
            value="gpt-3.5-turbo"
            id="zotero-prefpane-__addonRef__-OPENAI_MODEL-2"
          />
        </radiogroup>
      </hbox>
      <hbox>
        <label
          data-l10n-id="aria-pref-openai-api-key"
          style="display: flex; align-items: center"
        ></label>
        <html:input
          type="password"
          id="zotero-prefpane-__addonRef__-OPENAI_API_KEY"
          preference="extensions.zotero.__addonRef__.OPENAI_API_KEY"
        ></html:input>
      </hbox>
      <hbox>
        <label
          data-l10n-id="aria-pref-openai-base-url"
          style="display: flex; align-items: center"
        ></label>
        <html:input
          style="flex: 1; width: 100%"
          type="text"
          id="zotero-prefpane-__addonRef__-OPENAI_BASE_URL"
          preference="extensions.zotero.__addonRef__.OPENAI_BASE_URL"
        ></html:input>
      </hbox>
    </groupbox>

    <groupbox id="ollama-settings">
      <hbox>
        <label data-l10n-id="aria-pref-ollama-model"></label>
        <html:input
          style="flex: 1; width: 100%"
          type="text"
          id="zotero-prefpane-__addonRef__-OLLAMA_MODEL"
          preference="extensions.zotero.__addonRef__.OLLAMA_MODEL"
          placeholder="llama2"
        ></html:input>
      </hbox>
      <hbox>
        <label
          data-l10n-id="aria-pref-ollama-base-url"
          style="display: flex; align-items: center"
        ></label>
        <html:input
          style="flex: 1; width: 100%"
          type="text"
          id="zotero-prefpane-__addonRef__-OLLAMA_BASE_URL"
          preference="extensions.zotero.__addonRef__.OLLAMA_BASE_URL"
          placeholder="http://localhost:11434"
        ></html:input>
      </hbox>
    </groupbox>
  </groupbox>

  <groupbox>
    <label><html:h2 data-l10n-id="aria-pref-ui-customization"></html:h2></label>
    <hbox>
      <label
        data-l10n-id="aria-pref-default-zoom-level"
        style="display: flex; align-items: center"
      ></label>
      <html:input
        type="number"
        step="25"
        max="400"
        min="25"
        id="zotero-prefpane-__addonRef__-DEFAULT_ZOOM_LEVEL"
        preference="extensions.zotero.__addonRef__.DEFAULT_ZOOM_LEVEL"
      ></html:input>
    </hbox>
    <hbox>
      <label data-l10n-id="aria-pref-keyboard-shortcut"></label>
      <radiogroup
        id="zotero-prefpane-__addonRef__-SHORTCUT_MODIFIER"
        preference="extensions.zotero.__addonRef__.SHORTCUT_MODIFIER"
      >
        <radio
          label="Shift"
          value="shift"
          id="zotero-prefpane-__addonRef__-SHORTCUT_MODIFIER-shift"
        />
        <radio
          label="Ctrl + Shift"
          value="control shift"
          id="zotero-prefpane-__addonRef__-SHORTCUT_MODIFIER-ctrl-shift"
        />
        <radio
          label="Alt + Shift"
          value="alt shift"
          id="zotero-prefpane-__addonRef__-SHORTCUT_MODIFIER-alt-shift"
        />
      </radiogroup>
      <vbox>
        <label style="margin-top: 4px"> + </label>
      </vbox>
      <vbox>
        <html:input
          id="zotero-prefpane-__addonRef__-SHORTCUT_KEY"
          preference="extensions.zotero.__addonRef__.SHORTCUT_KEY"
          maxlength="1"
          size="1"
          style="margin: 0 4px"
        />
      </vbox>
    </hbox>
  </groupbox>

  <groupbox>
    <label><html:h2 data-l10n-id="aria-pref-feedback-submission"></html:h2></label>
    <hbox>
      <label
        data-l10n-id="aria-pref-user-email"
        style="display: flex; align-items: center"
      ></label>
      <html:input
        type="email"
        id="zotero-prefpane-__addonRef__-USER_EMAIL"
        preference="extensions.zotero.__addonRef__.USER_EMAIL"
      ></html:input>
    </hbox>
    <hbox>
      <checkbox
        id="zotero-prefpane-__addonRef__-FEEDBACK_NO_CONFIRMATION"
        data-l10n-id="aria-pref-feedback-no-confirmation"
        preference="extensions.zotero.__addonRef__.FEEDBACK_NO_CONFIRMATION"
      />
    </hbox>
  </groupbox>

  <html:br></html:br>
  <groupbox>
    <label
      data-l10n-id="aria-pref-help"
      data-l10n-args='{"time": "__buildTime__","name": "__addonName__","version":"__buildVersion__"}'
      style="margin-top: 24px"
    ></label>
  </groupbox>
</vbox>
